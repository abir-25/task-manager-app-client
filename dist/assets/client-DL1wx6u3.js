var Et=Object.defineProperty;var dt=s=>{throw TypeError(s)};var Ot=(s,t,e)=>t in s?Et(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var q=(s,t,e)=>Ot(s,typeof t!="symbol"?t+"":t,e),X=(s,t,e)=>t.has(s)||dt("Cannot "+e);var r=(s,t,e)=>(X(s,t,"read from private field"),e?e.call(s):t.get(s)),m=(s,t,e)=>t.has(s)?dt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),f=(s,t,e,i)=>(X(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),p=(s,t,e)=>(X(s,t,"access private method"),e);import{S as Tt,v as ft,w as O,n as Y,x as J,z as Ut,A as Z,B as pt,C as Ft,E as xt,F as It,G as bt,q as wt,r as T,b as Qt,H as Pt}from"./index-BGeUDN-j.js";var w,o,$,v,x,L,U,E,N,D,j,I,Q,F,M,h,B,tt,et,st,rt,it,at,nt,Ct,vt,At=(vt=class extends Tt{constructor(t,e){super();m(this,h);m(this,w);m(this,o);m(this,$);m(this,v);m(this,x);m(this,L);m(this,U);m(this,E);m(this,N);m(this,D);m(this,j);m(this,I);m(this,Q);m(this,F);m(this,M,new Set);this.options=e,f(this,w,t),f(this,E,null),f(this,U,ft()),this.options.experimental_prefetchInRender||r(this,U).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,o).addObserver(this),mt(r(this,o),this.options)?p(this,h,B).call(this):this.updateResult(),p(this,h,rt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ot(r(this,o),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ot(r(this,o),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,h,it).call(this),p(this,h,at).call(this),r(this,o).removeObserver(this)}setOptions(t,e){const i=this.options,l=r(this,o);if(this.options=r(this,w).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof O(this.options.enabled,r(this,o))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,h,nt).call(this),r(this,o).setOptions(this.options),i._defaulted&&!Y(this.options,i)&&r(this,w).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,o),observer:this});const n=this.hasListeners();n&&yt(r(this,o),l,this.options,i)&&p(this,h,B).call(this),this.updateResult(e),n&&(r(this,o)!==l||O(this.options.enabled,r(this,o))!==O(i.enabled,r(this,o))||J(this.options.staleTime,r(this,o))!==J(i.staleTime,r(this,o)))&&p(this,h,tt).call(this);const a=p(this,h,et).call(this);n&&(r(this,o)!==l||O(this.options.enabled,r(this,o))!==O(i.enabled,r(this,o))||a!==r(this,F))&&p(this,h,st).call(this,a)}getOptimisticResult(t){const e=r(this,w).getQueryCache().build(r(this,w),t),i=this.createResult(e,t);return Dt(this,i)&&(f(this,v,i),f(this,L,this.options),f(this,x,r(this,o).state)),i}getCurrentResult(){return r(this,v)}trackResult(t,e){const i={};return Object.keys(t).forEach(l=>{Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(l),e==null||e(l),t[l])})}),i}trackProp(t){r(this,M).add(t)}getCurrentQuery(){return r(this,o)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=r(this,w).defaultQueryOptions(t),i=r(this,w).getQueryCache().build(r(this,w),e);return i.fetch().then(()=>this.createResult(i,e))}fetch(t){return p(this,h,B).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,v)))}createResult(t,e){var lt;const i=r(this,o),l=this.options,n=r(this,v),a=r(this,x),b=r(this,L),d=t!==i?t.state:r(this,$),{state:y}=t;let c={...y},k=!1,g;if(e._optimisticResults){const R=this.hasListeners(),P=!R&&mt(t,e),A=R&&yt(t,i,e,l);(P||A)&&(c={...c,...It(y.data,t.options)}),e._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:_,errorUpdatedAt:z,status:C}=c;if(e.select&&c.data!==void 0)if(n&&c.data===(a==null?void 0:a.data)&&e.select===r(this,N))g=r(this,D);else try{f(this,N,e.select),g=e.select(c.data),g=bt(n==null?void 0:n.data,g,e),f(this,D,g),f(this,E,null)}catch(R){f(this,E,R)}else g=c.data;if(e.placeholderData!==void 0&&g===void 0&&C==="pending"){let R;if(n!=null&&n.isPlaceholderData&&e.placeholderData===(b==null?void 0:b.placeholderData))R=n.data;else if(R=typeof e.placeholderData=="function"?e.placeholderData((lt=r(this,j))==null?void 0:lt.state.data,r(this,j)):e.placeholderData,e.select&&R!==void 0)try{R=e.select(R),f(this,E,null)}catch(P){f(this,E,P)}R!==void 0&&(C="success",g=bt(n==null?void 0:n.data,R,e),k=!0)}r(this,E)&&(_=r(this,E),g=r(this,D),z=Date.now(),C="error");const H=c.fetchStatus==="fetching",G=C==="pending",K=C==="error",ut=G&&H,ct=g!==void 0,S={status:C,fetchStatus:c.fetchStatus,isPending:G,isSuccess:C==="success",isError:K,isInitialLoading:ut,isLoading:ut,data:g,dataUpdatedAt:c.dataUpdatedAt,error:_,errorUpdatedAt:z,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>d.dataUpdateCount||c.errorUpdateCount>d.errorUpdateCount,isFetching:H,isRefetching:H&&!G,isLoadingError:K&&!ct,isPaused:c.fetchStatus==="paused",isPlaceholderData:k,isRefetchError:K&&ct,isStale:ht(t,e),refetch:this.refetch,promise:r(this,U)};if(this.options.experimental_prefetchInRender){const R=W=>{S.status==="error"?W.reject(S.error):S.data!==void 0&&W.resolve(S.data)},P=()=>{const W=f(this,U,S.promise=ft());R(W)},A=r(this,U);switch(A.status){case"pending":t.queryHash===i.queryHash&&R(A);break;case"fulfilled":(S.status==="error"||S.data!==A.value)&&P();break;case"rejected":(S.status!=="error"||S.error!==A.reason)&&P();break}}return S}updateResult(t){const e=r(this,v),i=this.createResult(r(this,o),this.options);if(f(this,x,r(this,o).state),f(this,L,this.options),r(this,x).data!==void 0&&f(this,j,r(this,o)),Y(i,e))return;f(this,v,i);const l={},n=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,b=typeof a=="function"?a():a;if(b==="all"||!b&&!r(this,M).size)return!0;const u=new Set(b??r(this,M));return this.options.throwOnError&&u.add("error"),Object.keys(r(this,v)).some(d=>{const y=d;return r(this,v)[y]!==e[y]&&u.has(y)})};(t==null?void 0:t.listeners)!==!1&&n()&&(l.listeners=!0),p(this,h,Ct).call(this,{...l,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,h,rt).call(this)}},w=new WeakMap,o=new WeakMap,$=new WeakMap,v=new WeakMap,x=new WeakMap,L=new WeakMap,U=new WeakMap,E=new WeakMap,N=new WeakMap,D=new WeakMap,j=new WeakMap,I=new WeakMap,Q=new WeakMap,F=new WeakMap,M=new WeakMap,h=new WeakSet,B=function(t){p(this,h,nt).call(this);let e=r(this,o).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Ut)),e},tt=function(){p(this,h,it).call(this);const t=J(this.options.staleTime,r(this,o));if(Z||r(this,v).isStale||!pt(t))return;const i=Ft(r(this,v).dataUpdatedAt,t)+1;f(this,I,setTimeout(()=>{r(this,v).isStale||this.updateResult()},i))},et=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,o)):this.options.refetchInterval)??!1},st=function(t){p(this,h,at).call(this),f(this,F,t),!(Z||O(this.options.enabled,r(this,o))===!1||!pt(r(this,F))||r(this,F)===0)&&f(this,Q,setInterval(()=>{(this.options.refetchIntervalInBackground||xt.isFocused())&&p(this,h,B).call(this)},r(this,F)))},rt=function(){p(this,h,tt).call(this),p(this,h,st).call(this,p(this,h,et).call(this))},it=function(){r(this,I)&&(clearTimeout(r(this,I)),f(this,I,void 0))},at=function(){r(this,Q)&&(clearInterval(r(this,Q)),f(this,Q,void 0))},nt=function(){const t=r(this,w).getQueryCache().build(r(this,w),this.options);if(t===r(this,o))return;const e=r(this,o);f(this,o,t),f(this,$,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Ct=function(t){wt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(r(this,v))}),r(this,w).getQueryCache().notify({query:r(this,o),type:"observerResultsUpdated"})})},vt);function Lt(s,t){return O(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function mt(s,t){return Lt(s,t)||s.state.data!==void 0&&ot(s,t,t.refetchOnMount)}function ot(s,t,e){if(O(t.enabled,s)!==!1){const i=typeof e=="function"?e(s):e;return i==="always"||i!==!1&&ht(s,t)}return!1}function yt(s,t,e,i){return(s!==t||O(i.enabled,s)===!1)&&(!e.suspense||s.state.status!=="error")&&ht(s,e)}function ht(s,t){return O(t.enabled,s)!==!1&&s.isStaleByTime(J(t.staleTime,s))}function Dt(s,t){return!Y(s.getCurrentResult(),t)}var St=T.createContext(!1),jt=()=>T.useContext(St);St.Provider;function Mt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var kt=T.createContext(Mt()),_t=()=>T.useContext(kt);function zt(s,t){return typeof s=="function"?s(...t):!!s}function gt(){}var Ht=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},qt=s=>{T.useEffect(()=>{s.clearReset()},[s])},Bt=({result:s,errorResetBoundary:t,throwOnError:e,query:i,suspense:l})=>s.isError&&!t.isReset()&&!s.isFetching&&i&&(l&&s.data===void 0||zt(e,[s.error,i])),$t=s=>{const t=s.staleTime;s.suspense&&(s.staleTime=typeof t=="function"?(...e)=>Math.max(t(...e),1e3):Math.max(t??1e3,1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3)))},Nt=(s,t)=>s.isLoading&&s.isFetching&&!t,Wt=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,Rt=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function Jt(s,t,e){var c,k,g,_,z;const i=Qt(),l=jt(),n=_t(),a=i.defaultQueryOptions(s);(k=(c=i.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||k.call(c,a),a._optimisticResults=l?"isRestoring":"optimistic",$t(a),Ht(a,n),qt(n);const b=!i.getQueryCache().get(a.queryHash),[u]=T.useState(()=>new t(i,a)),d=u.getOptimisticResult(a),y=!l&&s.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(C=>{const H=y?u.subscribe(wt.batchCalls(C)):gt;return u.updateResult(),H},[u,y]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),T.useEffect(()=>{u.setOptions(a,{listeners:!1})},[a,u]),Wt(a,d))throw Rt(a,u,n);if(Bt({result:d,errorResetBoundary:n,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;if((_=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||_.call(g,a,d),a.experimental_prefetchInRender&&!Z&&Nt(d,l)){const C=b?Rt(a,u,n):(z=i.getQueryCache().get(a.queryHash))==null?void 0:z.promise;C==null||C.catch(gt).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?d:u.trackResult(d)}function Yt(s,t){return Jt(s,At)}class V{constructor(t){q(this,"defaultHeaders",{"content-type":"application/json"});q(this,"middleware",null);q(this,"baseURL");q(this,"onUnAuthorized",null);this.baseURL=t.baseURL,t.middleware&&(this.middleware=t.middleware),t.onUnAuthorized&&(this.onUnAuthorized=t.onUnAuthorized)}get(t,e={},i="json"){return this.request(t,"GET",e,void 0,i)}post(t,e={},i={}){return this.request(t,"POST",i,e)}put(t,e={},i={}){return this.request(t,"PUT",i,e)}patch(t,e={},i={}){return this.request(t,"PATCH",i,e)}delete(t,e={},i={}){return this.request(t,"DELETE",i,e)}async postForm(t,e,i={}){var l;try{const n=new FormData;Object.entries(e).forEach(([u,d])=>{if(typeof d=="object"&&!Array.isArray(d)&&!(d instanceof File)){n.append(u,JSON.stringify(d));return}if(Array.isArray(d)){d.forEach(y=>n.append(u,y));return}n.append(u,typeof d=="number"?d.toString():d)});const a={url:`${this.baseURL}/${t}`,method:"POST",headers:i,body:n};this.middleware!==null&&await new Promise((u,d)=>{this.middleware(a,y=>{if(y)return d(y);u(a)})});const b=await fetch(`${this.baseURL}/${t}`,{method:"POST",headers:{...a.headers},body:n});return b.status===401&&((l=this.onUnAuthorized)==null||l.call(this)),await b.json()}catch(n){return n instanceof Error?{status:!1,message:n.message}:{status:!1,message:"Failed To Fetch, Turn on Logging to see what went wrong"}}}async request(t,e,i={},l,n="json"){var a;try{const b={url:`${this.baseURL}/${t}`,method:e,headers:{...this.defaultHeaders,...i,"Access-Control-Allow-Origin":"*"},body:l};this.middleware!==null&&await new Promise((d,y)=>{this.middleware(b,c=>{if(c)return y(c);d(b)})});const u=await V.executeFetch(b);if(u.status===401&&((a=this.onUnAuthorized)==null||a.call(this)),!u.ok)throw new Error((await u.json()).message);return n==="json"?await u.json():{status:!0,data:await u.blob()}}catch(b){return b instanceof Error?{status:!1,message:b.message}:{status:!1,message:"Failed To Fetch, Check your internet connection"}}}static executeFetch(t){const{url:e,body:i,method:l,headers:n}=t;return fetch(e,{method:l,headers:n,body:i&&typeof i=="string"?i:i?JSON.stringify(i):void 0})}}const Vt=async(s,t)=>{try{const e=await Pt();return e&&(s.headers.Authorization=`Bearer ${e}`),t()}catch(e){return t(e)}},Zt=new V({baseURL:"https://api-task.agameeit.com/api/v1"}),te=new V({middleware:Vt,baseURL:"https://api-task.agameeit.com/api/v1"});export{Zt as a,te as b,gt as n,zt as s,Yt as u};
